{"library_version": "6.0.1", "change_type": "New Features", "change_id": "LUCENE-7278", "change_description": ": Spatial-extras DateRangePrefixTree's Calendar is now configurable, to\ne.g. clear the Gregorian Change Date.  Also, toString(cal) is now identical to\nDateTimeFormatter.ISO_INSTANT.", "change_title": "Make template Calendar configurable in DateRangePrefixTree", "detail_type": "Improvement", "detail_affect_versions": "None", "detail_fix_versions": "6.1", "detail_description": "DateRangePrefixTree (a SpatialPrefixTree designed for dates and date ranges) currently uses a hard-coded Calendar template for making new instances.  This ought to be configurable so that, for example, the Gregorian change date can be configured.  This is particularly important for compatibility with Java 8's java.time API which uses the Gregorian calendar for all time (there is no use of Julian prior to 1582).", "patch_link": "https://issues.apache.org/jira/secure/attachment/12806675/LUCENE-7278-clover.patch", "patch_content": "none"}
{"library_version": "6.0.1", "change_type": "Bug Fixes", "change_id": "LUCENE-7187", "change_description": ": Block join queries' Weight#extractTerms(...) implementations\nshould delegate to the wrapped weight.", "change_title": "Block join queries' weight impl should implement extractTerms(...)", "detail_type": "Bug", "detail_affect_versions": "None", "detail_fix_versions": "5.5.2,5.6,6.0.1,6.1", "detail_description": "In the case the distribute document frequencies need to be computed for block join queries, the child query is ignored.", "patch_link": "https://issues.apache.org/jira/secure/attachment/12797498/LUCENE_7187.patch", "patch_content": "none"}
{"library_version": "6.0.1", "change_type": "Bug Fixes", "change_id": "LUCENE-7209", "change_description": ": Fixed explanations of FunctionScoreQuery.", "change_title": "Fix FunctionQuery explanations", "detail_type": "Bug", "detail_affect_versions": "None", "detail_fix_versions": "5.5.1,6.0.1,6.1", "detail_description": "Reported by Erick at http://search-lucene.com/m/l6pAi1RGqH02e4syh1&subj=Explain+seems+weird+after+LUCENE+6590+6783+possible+bug+", "patch_link": "https://issues.apache.org/jira/secure/attachment/12798304/LUCENE-7209.patch", "patch_content": "none"}
{"library_version": "6.0.1", "change_type": "Bug Fixes", "change_id": "LUCENE-7232", "change_description": ": Fixed InetAddressPoint.newPrefixQuery, which was generating an\nincorrect query when the prefix length was not a multiple of 8.", "change_title": "InetAddressPoint.newPrefixQuery is not correct when prefixLength is not a multiple of 8", "detail_type": "Bug", "detail_affect_versions": "6.0", "detail_fix_versions": "6.0.1,6.1,7.0", "detail_description": "The reason is that it applies masks on individual bytes in the wrong order: it goes from the lower bits to the upper bits instead of the opposite.", "patch_link": "https://issues.apache.org/jira/secure/attachment/12799516/LUCENE-7232.patch", "patch_content": "none"}
{"library_version": "6.0.1", "change_type": "Bug Fixes", "change_id": "LUCENE-7279", "change_description": ": JapaneseTokenizer throws ArrayIndexOutOfBoundsException\non some valid inputs", "change_title": "AIOOBE from JapaneseTokenizer", "detail_type": "Bug", "detail_affect_versions": "None", "detail_fix_versions": "5.5.2,5.6,6.0.1,7.0", "detail_description": "On certain Japanese input strings you can hit this: I have a patch with a test case and fix.", "patch_link": "https://issues.apache.org/jira/secure/attachment/12803488/LUCENE-7279.patch", "patch_content": "none"}
{"library_version": "6.0.1", "change_type": "Bug Fixes", "change_id": "LUCENE-7188", "change_description": ": remove incorrect sanity check in NRTCachingDirectory.listAll()\nthat led to IllegalStateException being thrown when nothing was wrong.", "change_title": "IllegalStateException in NRTCachingDirectory.listAll", "detail_type": "Bug", "detail_affect_versions": "5.2.1", "detail_fix_versions": "5.5.1,6.0.1,6.1,7.0", "detail_description": "Hey, we are getting IllegalStateException in 2 different circumstances. The first one is on Status calls: and the second one is on some kind of replication related request: The Environment is a 3 node SOLR Cloud setup running SOLR 5.2.1. when looking at the code: i can see that the exception is thrown because the file exists in both the cache and the file system. this however doesn't make sense to me, because a file that is in cache will always be in the file system as well.", "patch_link": "https://issues.apache.org/jira/secure/attachment/12798174/LUCENE-7188.patch", "patch_content": "none"}
{"library_version": "6.0.1", "change_type": "Bug Fixes", "change_id": "LUCENE-7219", "change_description": ": Make queryparser/xml (Point|LegacyNumeric)RangeQuery builders\nmatch the underlying queries' (lower|upper)Term optionality logic.", "change_title": "(Point|LegacyNumeric)RangeQuery builders to match queries' (lower|upper)Term optionality logic", "detail_type": "Bug", "detail_affect_versions": "None", "detail_fix_versions": "5.5.2,5.6,6.0.1,6.1,7.0", "detail_description": "Currently the (Point|LegacyNumeric)RangeQuery queries themselves support (lower|upper)Term optionality e.g. the lowerTerm could be omitted but the (Point|LegacyNumeric)RangeQueryBuilder builders mandate (lower|upper)Term attributes. This mismatch seems unintended. Proposed patch for ...QueryBuilder logic to match ...Query logic to follow.", "patch_link": "https://issues.apache.org/jira/secure/attachment/12798966/LUCENE-7219.patch", "patch_content": "none"}
{"library_version": "6.0.1", "change_type": "Bug Fixes", "change_id": "LUCENE-7257", "change_description": ": Fixed PointValues#size(IndexReader, String), docCount,\nminPackedValue and maxPackedValue to skip leaves that do not have points\nrather than raising an IllegalStateException.", "change_title": "PointValues aggregated stats fail if the provided field does not have points on one of the leaves", "detail_type": "Bug", "detail_affect_versions": "None", "detail_fix_versions": "6.0.1,6.1,7.0", "detail_description": "The static helpers on PointValues to get aggregated size/docCount/minPackedValue/maxPackedValue fail if a leaf has points indexed (so that getPointValues() returns a non-null value) but not for the given field. In that case PointValues.size() throws an exception.", "patch_link": "https://issues.apache.org/jira/secure/attachment/12800814/LUCENE-7257.patch", "patch_content": "none"}
{"library_version": "6.0.1", "change_type": "Bug Fixes", "change_id": "LUCENE-7284", "change_description": ": GapSpans needs to implement positionsCost().", "change_title": "UnsupportedOperationException wrt SpanNearQuery with Gap (Needed for Synonym Query Expansion)", "detail_type": "Bug", "detail_affect_versions": "None", "detail_fix_versions": "5.5.2,5.6,6.0.1,6.1", "detail_description": "I am trying to support synonyms on the query side by doing  query expansion. For example, the query \"open webpage\" can be expanded if the following  things are synonyms: \"open\" | \"go to\" This becomes the following: (I'm using both the stop word filter and the  stemming filter) Notice that \"go to\" became just \"go\", because apparently \"to\" is removed  by the stop word filter. Interestingly, if you turn \"go to webpage\" into a phrase, you get \"go ?  webpage\", but if you turn \"go to\" into a phrase, you just get \"go\",  because apparently a trailing stop word in a PhraseQuery gets dropped.  (there would actually be no way to represent the gap currently because  it represents gaps implicitly via the position of the phrase tokens, and  if there is no second token, there's no way to implicitly indicate that  there is a gap there) The above query then fails to match \"go to webpage\", because \"go to  webpage\" in the index tokenizes as \"go _ webpage\", and the query,  because it lost its gap, tried to only match \"go webpage\". To try and work around that, I represent \"go to\" not as a phrase, but as  a SpanNearQuery, like this: However, when I run that query, I get the following: ... and when I look up that GapSpans class in SpanNearQuery.java, I see: I asked this question on the mailing list on May 14 and was directed to submit a bug here. This issue is of relatively high priority for us, since this represents the most promising technique we have for supporting synonyms on top of Lucene. (since the SynonymFilter suffers serious issues wrt multi-word synonyms)", "patch_link": "https://issues.apache.org/jira/secure/attachment/12804379/LUCENE-7284.patch", "patch_content": "none"}
{"library_version": "6.0.1", "change_type": "Bug Fixes", "change_id": "LUCENE-7231", "change_description": ": WeightedSpanTermExtractor didn't deal correctly with single-term\nphrase queries.", "change_title": "Problem with NGramAnalyzer, PhraseQuery and Highlighter", "detail_type": "Bug", "detail_affect_versions": "5.4.1", "detail_fix_versions": "5.5.2,5.6,6.0.1,6.1", "detail_description": "Using the Highlighter with N-GramAnalyzer and PhraseQuery and searching for a substring with length = N yields the following exception: Below is a JUnit-Test reproducing this behavior. In case of searching for a string with more than N characters or using NGramPhraseQuery this problem doesn't occur. Why is it that more than 1 subSpans are required?", "patch_link": "https://issues.apache.org/jira/secure/attachment/12804392/LUCENE-7231.patch", "patch_content": "none"}
{"library_version": "6.0.1", "change_type": "Bug Fixes", "change_id": "LUCENE-7293", "change_description": ": Don't try to highlight GeoPoint queries", "change_title": "Highlighting with GeoPointInBBoxQuery can result in Exception", "detail_type": "Bug", "detail_affect_versions": "5.5,6.0,7.0", "detail_fix_versions": "6.0.1,6.1,7.0", "detail_description": "Highlighter and GeoPointInBBoxQuery don't play well together. I wrote a test here that throws an exception which I think it should not: https://github.com/brwe/lucene-solr/commit/311f5527ffb6f3ef50e3f74b54456aa7b29d8898 The problem seems to be that GeoPointInBBoxQuery calls rewrite with a reader that contains a text field (which we want to highlight) and therefore has the wrong encoding. This is from an elasticsearch issue: https://github.com/elastic/elasticsearch/issues/17537", "patch_link": "https://issues.apache.org/jira/secure/attachment/12805327/LUCENE-7293-revert%2Bfix.patch", "patch_content": "none"}
{"library_version": "6.0.1", "change_type": "Documentation", "change_id": "LUCENE-7223", "change_description": ": Improve XXXPoint javadocs to make it clear that you\nshould separately add StoredField if you want to retrieve these\nfield values at search time", "change_title": "Add \"store\" hint to Points javadocs", "detail_type": "Bug", "detail_affect_versions": "None", "detail_fix_versions": "6.0.1,6.1,7.0", "detail_description": "We had this for e.g. docvalues fields from the beginning: We should add this to the points types too? It will prevent confusion.", "patch_link": "https://issues.apache.org/jira/secure/attachment/12798981/LUCENE-7223.patch", "patch_content": "none"}
