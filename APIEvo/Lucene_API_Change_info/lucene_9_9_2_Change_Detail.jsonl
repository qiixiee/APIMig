{"library_version": "9.9.2", "change_type": "Bug Fixes", "change_id": "GITHUB#13027", "change_description": ": Fix NPE when sampling for quantization in Lucene99HnswScalarQuantizedVectorsFormat", "change_title": "none", "detail_type": "none", "detail_affect_versions": "none", "detail_fix_versions": "none", "detail_description": "When merging Lucene99HnswScalarQuantizedVectorsFormat a NPE is possible when deleted documents are present. ScalarQuantizer#fromVectors doesn't take deleted documents into account. This means using FloatVectorValues#size may actually be larger than the actual size of live documents. Consequently, when iterating for sampling iteration too far is possible and an NPE will be thrown.", "patch_link": "none", "patch_content": "none"}
{"library_version": "9.9.2", "change_type": "Bug Fixes", "change_id": "GITHUB#13014", "change_description": ": Rollback the tmp storage of BytesRefHash to -1 after sort", "change_title": "none", "detail_type": "none", "detail_affect_versions": "none", "detail_fix_versions": "none", "detail_description": "In #12784 we cache buckets into extra slots in BytesRefHash to speed up BytesRefHash#sort . This causes an AssertError for TermsQuery because it could call sort more than once on a BytesRefHash instance. Not sure if any other users were relying on this but it would be great to keep consistent with before.", "patch_link": "none", "patch_content": "none"}
