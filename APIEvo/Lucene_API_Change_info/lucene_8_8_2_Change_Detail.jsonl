{"library_version": "8.8.2", "change_type": "Bug Fixes", "change_id": "LUCENE-9870", "change_description": ": Fix Circle2D intersectsLine t-value (distance) range clamp", "change_title": "Circle2D intersectsLine bug mostly causes no matches along indexed lines and outside polygon edges", "detail_type": "Bug", "detail_affect_versions": "8.8", "detail_fix_versions": "8.8.2", "detail_description": "Circle2D intersectsLine does a dot product to determine closest point on line but then filters it like this: If magnitudeAB (squared length of line) is less than 1 (degree), this will always return false. distance is actually the \"t-value\", meaning the correct behaviour here would be to clamp it between 0 and 1 to ensure point is on actual line. A straightforward fix that works since edge and end points are checked anyway: This is tested and verified by building version 8.8.0 and replacing jar-files in an elasticsearch instance of version 7.12.", "patch_link": "https://issues.apache.org/jira/secure/attachment/13022952/0001-Circle2D-Fix-intersectsLine-t-value-distance-range-c.patch", "patch_content": "none"}
{"library_version": "8.8.2", "change_type": "Bug Fixes", "change_id": "LUCENE-9744", "change_description": ": NPE on a degenerate query in MinimumShouldMatchIntervalsSource\n$MinimumMatchesIterator.getSubMatches().", "change_title": "NPE on a degenerate query in MinimumShouldMatchIntervalsSource$MinimumMatchesIterator.getSubMatches()", "detail_type": "Bug", "detail_affect_versions": "9.0,8.7", "detail_fix_versions": "9.0,8.9,8.8.2", "detail_description": "This query: produces an NPE when retrieving match regions. Note degenerate atLeast with only one argument - this may play a role but it's not signaled anywhere before (the query itself does select the right documents, NPE blows up when matches are retrieved). Stack: Repro test attached. romseygeek, help!", "patch_link": "https://issues.apache.org/jira/secure/attachment/13020195/LUCENE-9744.patch", "patch_content": "none"}
{"library_version": "8.8.2", "change_type": "Bug Fixes", "change_id": "LUCENE-9762", "change_description": ": DoubleValuesSource.fromQuery (also used by FunctionScoreQuery.boostByQuery) could\nthrow an exception when the query implements TwoPhaseIterator and when the score is requested\nrepeatedly.", "change_title": "DoubleValuesSource.fromQuery can fail when doc visited twice", "detail_type": "Bug", "detail_affect_versions": "8.5", "detail_fix_versions": "8.9,8.8.2", "detail_description": "As originally reported by Nicol√°s Lichtmaier on the java-user list, there are some trivial situations which can trigger an assertion error in the PostingsReader when enumerating PhrasePositions for a sloppy PhraseQuery... http://mail-archives.apache.org/mod_mbox/lucene-java-user/202102.mbox/%3C177a65ec-5ec3-e1aa-99c3-b478e165d5e8%40wolfram.com%3E", "patch_link": "https://issues.apache.org/jira/secure/attachment/13020313/LUCENE-9762.patch", "patch_content": "none"}
