{"library_version": "5.2.1", "change_type": "Bug Fixes", "change_id": "LUCENE-6482", "change_description": ": Fix class loading deadlock relating to Codec initialization,\ndefault codec and SPI discovery.", "change_title": "Class loading deadlock relating to Codec initialization, default codec and SPI discovery", "detail_type": "Bug", "detail_affect_versions": "4.9.1", "detail_fix_versions": "5.2.1,5.3,6.0", "detail_description": "This issue came up for us several times with Elasticsearch 1.3.4 (Lucene 4.9.1), with many threads seeming deadlocked but RUNNABLE: It didn't really make sense to see RUNNABLE threads in Object.wait(), but this seems to be symptomatic of deadlocks in static initialization (http://ternarysearch.blogspot.ru/2013/07/static-initialization-deadlock.html). I found LUCENE-5573 as an instance of this having come up with Lucene code before. I'm not sure what exactly is going on, but the deadlock in this case seems to involve these threads: Full thread dump: https://gist.github.com/shikhar/d0f6d2d008f45d2d4f91", "patch_link": "https://issues.apache.org/jira/secure/attachment/12738230/LUCENE-6482.patch", "patch_content": "none"}
{"library_version": "5.2.1", "change_type": "Bug Fixes", "change_id": "LUCENE-6523", "change_description": ": NRT readers now reflect a new commit even if there is\nno change to the commit user data", "change_title": "IW commit without commit user-data changes should also be reflected in NRT reopen", "detail_type": "Bug", "detail_affect_versions": "None", "detail_fix_versions": "5.2.1,5.3,6.0", "detail_description": "In LUCENE-6505 we fixed NRT readers to properly reflect changes from the last commit (new segments_N filename, new commit user-data), but I missed the case where a commit is done immediately after opening an NRT reader with no changes to the commit user-data.", "patch_link": "https://issues.apache.org/jira/secure/attachment/12737510/LUCENE-6523.patch", "patch_content": "none"}
{"library_version": "5.2.1", "change_type": "Bug Fixes", "change_id": "LUCENE-6527", "change_description": ": Queries now get a dummy Similarity when scores are not needed\nin order to not load unnecessary information like norms.", "change_title": "TermWeight should not load norms when needsScores is false", "detail_type": "Bug", "detail_affect_versions": "None", "detail_fix_versions": "5.2.1,6.0", "detail_description": "TermWeight currently loads norms all the time, even when needsScores is false.", "patch_link": "https://issues.apache.org/jira/secure/attachment/12737970/LUCENE-6527.patch", "patch_content": "none"}
